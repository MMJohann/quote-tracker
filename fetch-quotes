#!/usr/bin/python

from settings import getSettingsCacher
from instruments import *
from quotes import *
import datetime

print 'Content-Type: text/plain'
print ''

inst = Instrument.by_symbol ("MSFT")

if inst == None:
    print "MSFT not found"
    exit ()

source = sourceInstance (inst.source)

print source.fetch ("MSFT", datetime.date (1900, 1, 1))

exit ()

index = 0
while True:
    instrs = Instrument.all ().fetch (1000, index)
    if len (instrs) == 0:
        break
    index += len (instrs)

    for instr in instrs:
        if instr.source == 'yahoo':
            print 'Process %s...' % instr.symbol
        else:
            print 'Skip %s...' % instr.symbol

print 'OK'
